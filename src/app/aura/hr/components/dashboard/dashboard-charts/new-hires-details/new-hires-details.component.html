<div class="employee-details__content-header">
  <div class="modal-popup">
    <div class="modal-popup__header">
      <h3>Total New Hires</h3>
      <button (click)="onCancel($event)" mat-button>
        <mat-icon>close</mat-icon>
      </button>
    </div>
    <div class="modal-popup__content">
      <div class="g-card">
        <div class="g-card__box g-card__box--100">
          <div *ngIf="isLoadNationalitySpinner" class="spinner">
            <app-spinner diameter="35"></app-spinner>
          </div>
          <div class="g-card__box--header">
            <h3 class="card-title">{{ ChartTypeDesc.NewHiresByNationality }}</h3>
            <div class="g-card__box--export">  
              <div
                [matMenuTriggerFor]="downloadOptions"
                aria-expanded="false"
                (click)="
                  exportToCsvAllCharts(
                    ChartTypeDesc.NewHiresByNationality,
                    'chartWidget'
                  )
                "
              >
                <button mat-button class="btn-excel">
                  <img
                    src="./assets/svg/ua-download.svg"
                    alt=""
                    width="30px
                              "
                  />
                </button>
              </div>
            </div>
          </div>
          <div class="g-card__box--control">
            <mat-form-field appearance="outline" class="year-select">
              <mat-label>Year</mat-label>
              <mat-select
                [formControl]="nationalityYear"
                (selectionChange)="nationalityYearSelection()"
              >
                <mat-option *ngFor="let yr of year" [value]="yr">{{
                  yr
                }}</mat-option>
              </mat-select>
            </mat-form-field>
            <span class="t-count">
              Total Count - {{ nationalityResponseData?.totalCount }}
            </span>
          </div>
          <div class="g-card__box--chart">
            <div style="display: flex; flex-grow: 1">
              <canvas
                style="height: 150px"
                baseChart
                [datasets]="nationalityChartData"
                [labels]="nationalityChartLabels"
                [options]="nationalityChartOptions"
                [colors]="nationalityChartColors"
                [legend]="nationalityChartLegend"
                [chartType]="nationalityChartType"
              >
              </canvas>
            </div>
          </div>
        </div>
        <div class="g-card__box g-card__box--30">
          <div *ngIf="isLoadTypeEmpSpinner" class="spinner">
            <app-spinner diameter="35"></app-spinner>
          </div>
          <div class="g-card__box--header">
            <h3 class="card-title">{{ ChartTypeDesc.NewHiresByEmploymentType }}</h3>
            <div class="g-card__box--export">
              <div
                [matMenuTriggerFor]="downloadOptions"
                aria-expanded="false"
                (click)="
                  exportToCsvAllCharts(
                    ChartTypeDesc.NewHiresByEmploymentType,
                    'chartWidget'
                  )
                "
              >
                <button mat-button class="btn-excel">
                  <img
                    src="./assets/svg/ua-download.svg"
                    alt=""
                    width="30px
                              "
                  />
                </button>
              </div>
            </div>
          </div>
          <div class="g-card__box--control">
            <mat-form-field appearance="outline" class="year-select">
              <mat-label>Year</mat-label>
              <mat-select
                [formControl]="typeOfEmpYear"
                (selectionChange)="typeOfEmpYearSelection()"
              >
                <mat-option *ngFor="let yr of year" [value]="yr">{{
                  yr
                }}</mat-option>
              </mat-select>
            </mat-form-field>
            <span class="t-count">
              Total Count - {{ typeOfEmploymentResponseData?.totalCount }}
            </span>
          </div>
          <div class="g-card__box--chart">
            <div style="display: flex; flex-grow: 1">
              <canvas
                style="width: 230px; height: 230px"
                baseChart
                [datasets]="typeOfEmploymentChartData"
                [labels]="typeOfEmploymentChartLabels"
                [options]="typeOfEmploymentChartOptions"
                [colors]="typeOfEmploymentChartColors"
                [legend]="typeOfEmploymentChartLegend"
                [chartType]="typeOfEmploymentChartType"
              >
              </canvas>
            </div>
          </div>
        </div>
        <div class="g-card__box g-card__box--30">
          <div *ngIf="isLoadWorkAuthSpinner" class="spinner">
            <app-spinner diameter="35"></app-spinner>
          </div>
          <div class="g-card__box--header">
            <h3 class="card-title">{{ ChartTypeDesc.NewHiresByWorkAuthorization }}</h3>
            <div class="g-card__box--export">
              <div
                [matMenuTriggerFor]="downloadOptions"
                aria-expanded="false"
                (click)="
                  exportToCsvAllCharts(
                    ChartTypeDesc.NewHiresByWorkAuthorization,
                    'chartWidget'
                  )
                "
              >
                <button mat-button class="btn-excel">
                  <img
                    src="./assets/svg/ua-download.svg"
                    alt=""
                    width="30px
                              "
                  />
                </button>
              </div>
            </div>
          </div>
          <div class="g-card__box--control">
            <mat-form-field appearance="outline" class="year-select">
              <mat-label>Year</mat-label>
              <mat-select
                [formControl]="workAuthYear"
                (selectionChange)="workAuthYearSelection()"
              >
                <mat-option *ngFor="let yr of year" [value]="yr">{{
                  yr
                }}</mat-option>
              </mat-select>
            </mat-form-field>
            <span class="t-count">
              Total Count - {{ workAuthorizationResponseData?.totalCount }}
            </span>
          </div>
          <div class="g-card__box--chart">
            <div style="display: flex; flex-grow: 1">
              <canvas
                style="height: 230px; width: 230px"
                baseChart
                [datasets]="workAuthorizationChartData"
                [labels]="workAuthorizationChartLabels"
                [options]="workAuthorizationChartOptions"
                [colors]="workAuthorizationChartColors"
                [legend]="workAuthorizationChartLegend"
                [chartType]="workAuthorizationChartType"
              >
              </canvas>
            </div>
          </div>
        </div>
        <div class="g-card__box g-card__box--30">
          <div *ngIf="isLoadCategorySpinner" class="spinner">
            <app-spinner diameter="35"></app-spinner>
          </div>
          <div class="g-card__box--header">
            <h3 class="card-title">{{ ChartTypeDesc.EmployeeCategory }}</h3>
            <div class="g-card__box--export">
              <div
                [matMenuTriggerFor]="downloadOptions"
                aria-expanded="false"
                (click)="
                  exportToCsvAllCharts(
                    ChartTypeDesc.EmployeeCategory,
                    'chartWidget'
                  )
                "
              >
                <button mat-button class="btn-excel">
                  <img
                    src="./assets/svg/ua-download.svg"
                    alt=""
                    width="30px
                              "
                  />
                </button>
              </div>
            </div>
          </div>
          <div class="g-card__box--control">
            <mat-form-field appearance="outline" class="year-select">
              <mat-label>Year</mat-label>
              <mat-select
                [formControl]="byCategoryYear"
                (selectionChange)="byCategoryYearSelection()"
              >
                <mat-option *ngFor="let yr of year" [value]="yr">{{
                  yr
                }}</mat-option>
              </mat-select>
            </mat-form-field>
            <span class="t-count">
              Total Count - {{ statisticsByCategoryResponseData?.totalCount }}
            </span>
          </div>
          <div class="g-card__box--chart">
            <div style="display: flex; flex-grow: 1">
              <canvas
                style="height: 230px; width: 230px"
                baseChart
                [datasets]="categoryChartData"
                [labels]="categoryChartLabels"
                [options]="categoryChartOptions"
                [colors]="categoryChartColors"
                [legend]="categoryChartLegend"
                [chartType]="categoryChartType"
              >
              </canvas>
            </div>
          </div>
        </div>
        <div class="g-card__box g-card__box--100">
          <div class="g-card__box--header">
            <div class="total-ae-tbl">
              <input
                type="text"
                #search
                (keyup)="performSearch(search?.value!)"
                placeholder="Search...."
                matTooltip="Search...."
              />
              <h3 class="card-title">Total New Hires</h3>
              <div class="g-card__box--control total-ae-tbl--c">
                <div class="g-card__box--control--f">
                  <mat-form-field appearance="outline" class="year-select">
                    <mat-label>Year</mat-label>
                    <mat-select
                      [formControl]="newHireEmpYear"
                      (selectionChange)="newHireEmpYearSelection()"
                    >
                      <mat-option *ngFor="let yr of year" [value]="yr">{{
                        yr
                      }}</mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
                <div
                  [matMenuTriggerFor]="downloadOptions"
                  aria-expanded="false"
                  (click)="exportToCsvNewHireEmpTable('chartTable')"
                >
                  <button mat-button class="btn-excel">
                    <img
                      src="./assets/svg/ua-download.svg"
                      alt=""
                      width="30px
                                "
                    />
                  </button>
                </div>
              </div>
            </div>
          </div>
          <app-emp-table-details
            [isLoading]="newHireEmployeePanelConfig.isLoading"
            [displayedColumns]="newHireEmployeePanelConfig.displayedColumns"
            [columns]="newHireEmployeePanelConfig.columns"
            [tableData]="newHireEmployeePanelConfig.tableData"
            [totalRows]="newHireEmployeePanelConfig.totalRows"
            (paginatorClicked)="getNextRecords($event)"
          >
          </app-emp-table-details>
        </div>
      </div>
    </div>
  </div>
</div>
<div>
  <mat-menu #downloadOptions="matMenu">
    <mat-selection-list class="d-format" [multiple]="false">
      <mat-list-option (click)="download('xlsx')">
        <img src="./assets/svg/excel.svg" alt="" width="24px" /> Download as
        Excel</mat-list-option
      >
      <mat-list-option (click)="download('csv')">
        <img src="./assets/svg/csv.svg" alt="" width="24px" />Download as
        CSV</mat-list-option
      >
    </mat-selection-list>
  </mat-menu>
</div>
